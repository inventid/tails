<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Tails : Models on the fly!">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Tails</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/inventid/tails">View on GitHub</a>

          <h1 id="project_title">Tails</h1>
          <h2 id="project_tagline">Models on the fly!</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/inventid/tails/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/inventid/tails/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p><a href="http://opensource.inventid.nl"><img src="https://s3-eu-west-1.amazonaws.com/static-inventid-nl/content/img/logo.png" alt="inventid logo"></a></p>

<h1>
<a name="tails" class="anchor" href="#tails"><span class="octicon octicon-link"></span></a>Tails</h1>

<table>
<thead><tr>
<th>Branch</th>
<th>Build status</th>
<th>Coverage</th>
</tr></thead>
<tbody>
<tr>
<td>Master branch</td>
<td><a href="https://travis-ci.org/inventid/tails"><img src="https://travis-ci.org/inventid/tails.svg?branch=master" alt="Build Status master branch"></a></td>
<td><a href="https://coveralls.io/r/inventid/tails?branch=master"><img src="http://img.shields.io/coveralls/inventid/tails/master.svg" alt="Coverage Status"></a></td>
</tr>
<tr>
<td>Develop branch</td>
<td><a href="https://travis-ci.org/inventid/tails"><img src="https://travis-ci.org/inventid/tails.svg?branch=develop" alt="Build Status develop branch"></a></td>
<td><a href="https://coveralls.io/r/inventid/tails?branch=develop"><img src="http://img.shields.io/coveralls/inventid/tails/develop.svg" alt="Coverage Status"></a></td>
</tr>
</tbody>
</table><h2>
<a name="what-is-it" class="anchor" href="#what-is-it"><span class="octicon octicon-link"></span></a>What is it?</h2>

<p><strong>Caution</strong>: Tails is still under heavy development and it's API may still change here and there.</p>

<p>Tails is a layer on top of Backbone makes it super easy to manage your models in the front-end. It takes away the issue of loading and linking related models and allows you to focus on the important bits of your web app. </p>

<p>Tails is designed to integrate nicely with a Rails app that exposes a REST API of it's data to the front-end. Tails aims to duplicate your back-end models in the front-end, lazy loading any properties you may need automatically when you need them.</p>

<h2>
<a name="how-to-use-it" class="anchor" href="#how-to-use-it"><span class="octicon octicon-link"></span></a>How to use it?</h2>

<p>Easy! Have a look at some examples:</p>

<div class="highlight highlight-CoffeeScript"><pre><span class="k">class</span> <span class="nx">Models</span><span class="p">.</span><span class="nx">Fruit</span> <span class="k">extends</span> <span class="nx">Tails</span><span class="p">.</span><span class="nx">Model</span>
  <span class="nx">@belongsTo</span> <span class="nf">-&gt;</span> <span class="nv">basket: </span><span class="nx">Models</span><span class="p">.</span><span class="nx">Basket</span>

<span class="k">class</span> <span class="nx">Models</span><span class="p">.</span><span class="nx">Basket</span> <span class="k">extends</span> <span class="nx">Tails</span><span class="p">.</span><span class="nx">Model</span>
  <span class="nx">@hasMany</span> <span class="nf">-&gt;</span> <span class="nv">fruits: </span><span class="nx">Models</span><span class="p">.</span><span class="nx">Fruit</span>

<span class="c1"># Initializing the relation using foreign key</span>
<span class="nv">fruit = </span><span class="k">new</span> <span class="nx">Models</span><span class="p">.</span><span class="nx">Fruits</span><span class="p">({</span><span class="nv">basket_id: </span><span class="mi">5</span><span class="p">})</span>
<span class="nv">basket = </span><span class="k">new</span> <span class="nx">Models</span><span class="p">.</span><span class="nx">Basket</span><span class="p">({</span><span class="nv">id: </span><span class="mi">5</span><span class="p">})</span>
<span class="nx">fruit</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">'basket'</span><span class="p">)</span> <span class="o">is</span> <span class="nx">basket</span>            <span class="c1"># true</span>

<span class="c1"># Tails always keeps track of the relations </span>
<span class="nx">basket</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">'fruits'</span><span class="p">).</span><span class="nx">contains</span><span class="p">(</span><span class="nx">fruit</span><span class="p">)</span>     <span class="c1"># true</span>
<span class="nx">fruit</span><span class="p">.</span><span class="nx">unset</span><span class="p">(</span><span class="s">'basket'</span><span class="p">)</span>
<span class="nx">basket</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">'fruits'</span><span class="p">).</span><span class="nx">contains</span><span class="p">(</span><span class="nx">fruit</span><span class="p">)</span>     <span class="c1"># false</span>

<span class="c1"># Initializing relation by explicitly setting it</span>
<span class="nv">fruit = </span><span class="k">new</span> <span class="nx">Models</span><span class="p">.</span><span class="nx">Fruit</span><span class="p">(</span><span class="nv">basket: </span><span class="nx">basket</span><span class="p">)</span>
<span class="nx">fruit</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">'basket_id'</span><span class="p">)</span> <span class="o">is</span> <span class="mi">5</span>              <span class="c1"># true</span>
</pre></div>

<p>As you might have noticed in the example above, we pass functions to the <code>belongsTo</code> and <code>hasMany</code> class methods. This is because classes that have a relation to each other create a circular dependency. Tails evaluates the function after both the models are loaded (in fact, just before <code>initialize</code> is called on your model), which ensures that it can always find the dependencies. If you are sure this is not gonna be an issue for you, you can also choose not to wrap your arguments into a function, as such: <code>@hasMany: fruits: Models.Fruit</code></p>

<p>Tails follows the Rails mantra of <em>convention over configuration</em>. That means that it will automatically use <em>model_name</em>_id as the foreign key of a model. But don't worry if you have your application set up differently! Tails allows you to specify a custom foreign key:</p>

<div class="highlight highlight-CoffeeScript"><pre><span class="k">class</span> <span class="nx">Models</span><span class="p">.</span><span class="nx">Dog</span> <span class="k">extends</span> <span class="nx">Tails</span><span class="p">.</span><span class="nx">Model</span>
  <span class="nx">@belongsTo</span> <span class="nf">-&gt;</span> <span class="nv">owner: </span><span class="nx">Models</span><span class="p">.</span><span class="nx">Person</span><span class="p">,</span> <span class="nv">foreignKey: </span><span class="s">'owner_id'</span>

<span class="k">class</span> <span class="nx">Models</span><span class="p">.</span><span class="nx">Person</span> <span class="k">extends</span> <span class="nx">Tails</span><span class="p">.</span><span class="nx">Model</span>
  <span class="nx">@hasMany</span> <span class="nf">-&gt;</span> <span class="nv">pets: </span><span class="nx">Models</span><span class="p">.</span><span class="nx">Dog</span><span class="p">,</span> <span class="nv">foreignKey: </span><span class="s">'owner_id'</span>

<span class="nv">person = </span><span class="k">new</span> <span class="nx">Models</span><span class="p">.</span><span class="nx">Person</span><span class="p">({</span><span class="nv">id: </span><span class="mi">1</span><span class="p">})</span>
<span class="nv">dog = </span><span class="k">new</span> <span class="nx">Models</span><span class="p">.</span><span class="nx">Dog</span><span class="p">({</span><span class="nv">owner: </span><span class="nx">person</span><span class="p">})</span>

<span class="nx">dog</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">'owner'</span><span class="p">)</span> <span class="o">is</span> <span class="nx">person</span>              <span class="c1"># true</span>
<span class="nx">person</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">'pets'</span><span class="p">).</span><span class="nx">contains</span><span class="p">(</span><span class="nx">dog</span><span class="p">)</span>        <span class="c1"># true</span>
</pre></div>

<h3>
<a name="mixins" class="anchor" href="#mixins"><span class="octicon octicon-link"></span></a>Mixins</h3>

<p>Tails also provides a few mixins that may be of use. Be sure to extend Tails.Mixable, and then you're free to use them as you see fit!</p>

<div class="highlight highlight-CoffeeScript"><pre><span class="k">class</span> <span class="nx">SomeClass</span> <span class="k">extends</span> <span class="nx">Tails</span><span class="p">.</span><span class="nx">Mixable</span>
</pre></div>

<p>Of course, it may not always be possible to extend this way, primarily if you must inherit from some other class. No worries! Underscore.js has you covered.</p>

<div class="highlight highlight-CoffeeScript"><pre><span class="k">class</span> <span class="nx">SomeClass</span> <span class="k">extends</span> <span class="nx">SomeBaseClass</span>
  <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">Tails</span><span class="p">.</span><span class="nx">Mixable</span>
</pre></div>

<h4>
<a name="tailsmixinsinterceptable" class="anchor" href="#tailsmixinsinterceptable"><span class="octicon octicon-link"></span></a>Tails.Mixins.Interceptable</h4>

<p>The Interceptable mixin allows you to execute code before or after a certain method runs. This is useful for things like routers, where a lot of share code.</p>

<div class="highlight highlight-CoffeeScript"><pre><span class="k">class</span> <span class="nx">MyRouter</span> <span class="k">extends</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Router</span>
  <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">Tails</span><span class="p">.</span><span class="nx">Mixable</span>

  <span class="nx">@concern</span> <span class="nx">Tails</span><span class="p">.</span><span class="nx">Mixins</span><span class="p">.</span><span class="nx">Interceptable</span>

  <span class="nx">@before</span> <span class="nv">these: </span><span class="p">[</span><span class="s">'friends'</span><span class="p">,</span> <span class="s">'account'</span><span class="p">],</span> <span class="nv">do: </span><span class="s">'ensureSignedIn'</span>
  <span class="nx">@before</span> <span class="nv">admin: </span><span class="s">'ensureAdmin'</span>

  <span class="nv">routes: </span>
    <span class="s">'/friends'</span><span class="o">:</span> <span class="s">'friends'</span>
    <span class="s">'/account'</span><span class="o">:</span> <span class="s">'account'</span>
    <span class="s">'/admin'</span><span class="o">:</span>   <span class="s">'admin'</span>

  <span class="nv">products: </span><span class="nf">( ) -&gt;</span>
  <span class="nv">account: </span><span class="nf">( ) -&gt;</span>
  <span class="nv">admin: </span><span class="nf">( ) -&gt;</span>
  <span class="nv">ensureSignedIn: </span><span class="nf">( ) -&gt;</span>
  <span class="nv">ensureAdmin: </span><span class="nf">( ) -&gt;</span>
</pre></div>

<p>Here too Tails allows you to pass functions instead of plain objects, which allows us to use actual pointers to methods instead of strings because were sure these methods are loaded when the functions are evaluated: </p>

<div class="highlight highlight-CoffeeScript"><pre><span class="nx">@before</span> <span class="nf">-&gt;</span> <span class="nv">these: </span><span class="p">[</span><span class="nx">@friends</span><span class="p">,</span> <span class="nx">@account</span><span class="p">],</span> <span class="nv">do: </span><span class="nx">@ensureSignedIn</span>
<span class="nx">@before</span> <span class="nf">-&gt;</span> <span class="nv">admin: </span><span class="nx">@ensureAdmin</span>
</pre></div>

<p>However, in this particular case it's a bit hairy because of the way how Backbone handles its routes, and it wouldn't work. Backbone extracts these methods and stores them seperatly, keeping us from properly setting our interceptors. See <a href="https://github.com/inventid/tails/issues/7">#7</a>.</p>

<h4>
<a name="tailsmixinsdynamicproperties" class="anchor" href="#tailsmixinsdynamicproperties"><span class="octicon octicon-link"></span></a>Tails.Mixins.DynamicProperties</h4>

<p>The DynamicProperties mixin makes it easy to put getters and setters on your class. This is mainly useful for CoffeeScript where the <code>get</code> and <code>set</code> JavaScript syntax is not available.</p>

<div class="highlight highlight-CoffeeScript"><pre><span class="k">class</span> <span class="nx">SomeClass</span> <span class="k">extends</span> <span class="nx">Tails</span><span class="p">.</span><span class="nx">Mixable</span>
  <span class="nx">@getter</span> <span class="nf">-&gt;</span> <span class="nv">myProperty: </span><span class="nf">( )       -&gt;</span> <span class="k">return</span> <span class="nx">@_myProperty</span>
  <span class="nx">@setter</span> <span class="nf">-&gt;</span> <span class="nv">myProperty: </span><span class="nf">( value ) -&gt;</span> <span class="vi">@_myProperty = </span><span class="nx">value</span> <span class="k">if</span> <span class="nx">value</span> <span class="o">&gt;</span> <span class="mi">3</span>
</pre></div>

<h3>
<a name="how-to-suggest-improvements" class="anchor" href="#how-to-suggest-improvements"><span class="octicon octicon-link"></span></a>How to suggest improvements?</h3>

<p>We are still actively developing Tails for our internal use, but we would already love to hear your feedback. In case you have some great ideas, you may just <a href="https://github.com/inventid/tails/issues/new">open an issue</a>. Be sure to check beforehand whether the same issue does not already exist.</p>

<h3>
<a name="how-can-i-contribute" class="anchor" href="#how-can-i-contribute"><span class="octicon octicon-link"></span></a>How can I contribute?</h3>

<p>We feel contributions from the community are extremely worthwhile. If you use Tails in production and make some modification, please share it back to the community. You can simply <a href="/inventid/tails/fork">fork the repository</a>, commit your changes to your code and create a pull request back to this repository.</p>

<p>If there are any issues related to your changes, be sure to reference to those. Additionally we use the <code>develop</code> branch, so create a pull request to that branch and not to <code>master</code>.</p>

<h3>
<a name="collaborators" class="anchor" href="#collaborators"><span class="octicon octicon-link"></span></a>Collaborators</h3>

<p>We would like to thank the developers which contributed to Tails, both big and small.</p>

<ul>
<li>
<a href="https://github.com/joostverdoorn">joostverdoorn</a> (Lead developer of Tails @ <a href="http://www.inventid.nl">inventid</a>)</li>
<li>
<a href="https://github.com/steffansluis">steffansluis</a> (Developer @ <a href="https://secure.feedbackfruits.com">FeedbackFruits</a>)</li>
<li>
<a href="https://github.com/rogierslag">rogierslag</a> (Developer @ <a href="http://www.inventid.nl">inventid</a>)</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Tails maintained by <a href="https://github.com/inventid">inventid</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
